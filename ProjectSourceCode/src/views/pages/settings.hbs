{{>header}}

{{>nav}}

{{>message}}

<div style="background-color: #F6F7EB;">
  <div class="container-md mx-auto py-4" style="max-width: 600px; color: #050014;">
    <!-- Username Update -->
    <div class="mb-4 p-3" style="background-color: #7A001B; border-radius: 12px; border: 2px solid #A30023; color: #F6F7EB;">
      <form action="/settings/updateUsername" method="POST">
        <label for="updateUsername" class="form-label" style="color: #F6F7EB;">New Username</label>
        <input 
          name="username" 
          type="text" 
          class="form-control rounded mb-3" 
          id="updateUsername" 
          placeholder="Sample1234" 
          style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;" 
          required>
        <button class="btn w-100 rounded" type="submit" style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;">Change Username</button>
      </form>
    </div>

    <!-- Password Update -->
    <div class="mb-4 p-3" style="background-color: #7A001B; border-radius: 12px; border: 2px solid #A30023; color: #F6F7EB;">
      <form action="/settings/updatePassword" method="POST">
        <label for="updatePassword" class="form-label" style="color: #F6F7EB;">New Password</label>
        <input 
          name="password" 
          type="password" 
          class="form-control rounded mb-3" 
          id="updatePassword" 
          placeholder="Password" 
          style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;" 
          required>
        <input 
          name="password_confirm" 
          type="password" 
          class="form-control rounded mb-3" 
          id="confirmPassword" 
          placeholder="Confirm Password" 
          style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;" 
          required>
        <button class="btn w-100 rounded" type="submit" style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;">Change Password</button>
      </form>
    </div>

    <!-- Picture Update -->
    <div class="mb-4 p-3" style="background-color: #7A001B; border-radius: 12px; border: 2px solid #A30023; color: #F6F7EB;">
      <form action="/settings/updatePicture" method="POST">
        <label for="updatePicture" class="form-label" style="color: #F6F7EB;">New Picture</label>
        <input 
          type="file" 
          onchange="loadImage()" 
          style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;" 
          class="form-control rounded mb-3">
        <input 
          id="newPictureText" 
          name="newPicture" 
          type="text" 
          class="form-control rounded" 
          hidden>
        <div class="text-center">
          <img name="newPicture" src="" height="200" alt="Image preview" class="mb-3" style="border-radius: 12px; border: 2px solid #F6F7EB;" />
        </div>
        <button class="btn w-100 rounded" type="submit" style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;">Change Profile Picture</button>
      </form>
    </div>

    <!-- Delete Account -->
    <div class="mb-4 p-3" style="background-color: #7A001B; border-radius: 12px; border: 2px solid #A30023; color: #F6F7EB;">
      <form action="/settings/deleteAccount" method="POST">
        <button class="btn w-100 rounded" type="submit" style="background-color: #A30023; color: #F6F7EB; border: 1px solid #F6F7EB;">Delete Account</button>
      </form>
    </div>
  </div>
</div>

<script>
  function loadImage() {
    const preview = document.querySelector("img");
    const file = document.querySelector("input[type=file]").files[0];
    const reader = new FileReader();

    reader.addEventListener(
      "load",
      () => {
        // Convert image file to base64 string
        preview.src = reader.result;
        document.getElementById("newPictureText").value = reader.result;
        console.log(reader.result.length);
      },
      false
    );

    if (file) {
      reader.readAsDataURL(file);
    }
  }
</script>


{{>footer}}